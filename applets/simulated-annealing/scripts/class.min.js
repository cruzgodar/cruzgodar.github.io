import{Applet}from"../../../scripts/applets/applet.min.js";import{convertColor}from"/scripts/src/browser.min.js";import{addTemporaryWorker}from"/scripts/src/main.min.js";import{siteSettings}from"/scripts/src/settings.min.js";import{WilsonCPU}from"/scripts/wilson.min.js";class SimulatedAnnealing extends Applet{webWorker;resolution=1e3;numNodes;maximumSpeed;constructor({canvas}){super(canvas);var t={canvasWidth:this.resolution,reduceMotion:siteSettings.reduceMotion,fullscreenOptions:{useFullscreenButton:!0,enterFullscreenButtonIconPath:"/graphics/general-icons/enter-fullscreen.png",exitFullscreenButtonIconPath:"/graphics/general-icons/exit-fullscreen.png"}};this.wilson=new WilsonCPU(canvas,t)}run({resolution,numNodes,maximumSpeed}){this.resolution=resolution,this.numNodes=numNodes,this.maximumSpeed=maximumSpeed;const t=resolution/1e3;this.wilson.resizeCanvas({width:resolution}),this.wilson.ctx.fillStyle=convertColor(0,0,0),this.wilson.ctx.fillRect(0,0,resolution,resolution),this.wilson.ctx.lineWidth=t,this.webWorker=addTemporaryWorker("/applets/simulated-annealing/scripts/worker.js"),this.webWorker.onmessage=e=>{0===e.data[0]?(this.wilson.ctx.fillStyle=convertColor(...e.data[4]),this.wilson.ctx.beginPath(),this.wilson.ctx.moveTo(e.data[1],e.data[2]),this.wilson.ctx.arc(e.data[1],e.data[2],e.data[3]*t,0,2*Math.PI,!1),this.wilson.ctx.fill()):1===e.data[0]?(this.wilson.ctx.strokeStyle=convertColor(...e.data[5]),this.wilson.ctx.beginPath(),this.wilson.ctx.moveTo(e.data[1],e.data[2]),this.wilson.ctx.lineTo(e.data[3],e.data[4]),this.wilson.ctx.stroke()):(this.wilson.ctx.fillStyle=convertColor(0,0,0),this.wilson.ctx.fillRect(0,0,this.resolution,this.resolution))},this.webWorker.postMessage([this.resolution,this.numNodes,this.maximumSpeed])}}export{SimulatedAnnealing};