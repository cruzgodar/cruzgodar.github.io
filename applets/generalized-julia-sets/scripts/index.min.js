import{showPage}from"../../../scripts/src/loadPage.min.js";import{GeneralizedJuliaSets}from"./class.min.js";import{getRandomGlsl}from"/scripts/applets/applet.min.js";import{DownloadButton,GenerateButton,ToggleButton}from"/scripts/src/buttons.min.js";import{Dropdown}from"/scripts/src/dropdowns.min.js";import{$}from"/scripts/src/main.min.js";import{siteSettings}from"/scripts/src/settings.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";import{Textarea}from"/scripts/src/textareas.min.js";export default function(){let e;const t=new ToggleButton({element:$("#switch-julia-mode-button"),name0:"Pick Julia Set",name1:"Return to Mandelbrot",persistState:!1,onClick0:()=>e.advanceJuliaMode(),onClick1:()=>e.advanceJuliaMode()}),n=((e=new GeneralizedJuliaSets({canvas:$("#output-canvas"),switchJuliaModeButton:t})).loadPromise.then(()=>r()),new GenerateButton({element:$("#generate-button"),onClick:r}),new DownloadButton({element:$("#download-button"),applet:e,filename:"a-generalized-julia-set.png"}),{mandelbrot:"cadd(cpow(z, 2.0), c)",variedExponent:"cadd(cpow(z, draggableArg + vec2(3.0, 0.0)), c)",trig:"csin(cmul(z, c))",burningShip:"cadd(cpow(vec2(abs(z.x), -abs(z.y)), 2.0), c)",rationalMap:"cadd(csub(cpow(z, 2.0), cmul(.05, cpow(z, -2.0))), c)",mandelbrotDust:"cadd(csub(cpow(z, 2.0), vec2(0.0, cmul(.05, cpow(z, -2.0).y))), c)",vertebrae:"cdiv(cadd(cexp(cmul(c, z)), csub(cadd(z, z), cdiv(c, z))), ccos(csin(cdiv(c, vec2(z.y, z.x)))))"}),o=new Dropdown({element:$("#examples-dropdown"),name:"Examples",options:{mandelbrot:"Classical Mandelbrot",variedExponent:"Varied Exponent",trig:"Trig Example",burningShip:"Burning Ship",rationalMap:"Rational Map",mandelbrotDust:"Mandelbrot Dust",vertebrae:"Vertebrae",...window.DEBUG&&{random:"Random"}},onInput:function(){{var e;"random"===o.value?(e=getRandomGlsl({variables:["z","c"]}),console.log(e),a.setValue(e)):a.setValue(n[o.value])}r()}}),a=new Textarea({element:$("#glsl-textarea"),name:"Generating Code",value:"cadd(cpow(z, 2.0), c)",onInput:()=>{o.value&&o.setValue({newValue:"default"})},onEnter:r}),s=new TextBox({element:$("#resolution-input"),name:"Resolution",value:1e3,minValue:100,maxValue:2e3,onEnter:r,onInput:function(){e.resolution=s.value*siteSettings.resolutionMultiplier,e.wilson&&e.wilson.resizeCanvas({width:e.resolution})}});function r(){t.setState({newState:!1}),t.disabled=!1,e.run({generatingCode:a.value,resolution:s.value*siteSettings.resolutionMultiplier})}showPage()}