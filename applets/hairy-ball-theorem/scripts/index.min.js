import{showPage}from"../../../scripts/src/loadPage.min.js";import{HairyBall}from"./class.min.js";import{parseNaturalGlsl}from"/scripts/applets/applet.min.js";import{DownloadButton,GenerateButton}from"/scripts/src/buttons.min.js";import{Checkbox}from"/scripts/src/checkboxes.min.js";import{Dropdown}from"/scripts/src/dropdowns.min.js";import{$}from"/scripts/src/main.min.js";import{siteSettings}from"/scripts/src/settings.min.js";import{Slider}from"/scripts/src/sliders.min.js";import{Textarea}from"/scripts/src/textareas.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";export default function(){const e=new TextBox({element:$("#resolution-input"),name:"Resolution",value:1e3,minValue:100,maxValue:2e3,onInput:function(){a.changeResolution(e.value*siteSettings.resolutionMultiplier)}}),t=new TextBox({element:$("#vector-field-resolution-input"),name:"Vector Field Resolution",value:1e3,minValue:100,maxValue:1500,onInput:u}),o=new Slider({element:$("#vector-field-dilation-slider"),name:"Vector Field Dilation",value:2,min:0,max:3,integer:!0,onInput:u}),s=new Checkbox({element:$("#raw-glsl-checkbox"),name:"Use raw GLSL"}),n={sources:"(x - z, y - z)",saddles:"(x, y)",sinks:"(1 / (x + 2), 1 / (y + 2))",circulation:"(x^2 - z, -y^3 - z)"},l={sources:"(x - z, y - z)",saddles:"(x, y)",sinks:"(1.0 / (x + 2.0), 1.0 / (y + 2.0))",circulation:"(x^2 - z, -y^3 - z)"},i=new Dropdown({element:$("#examples-dropdown"),name:"Examples",options:{sources:"Sources",saddles:"Saddles",sinks:"Sinks",circulation:"Circulation"},onInput:function(){i.value&&(r.setValue((s.checked?l:n)[i.value]),u())}}),r=new Textarea({element:$("#glsl-textarea"),name:"Generating Code",value:"(x - z, y - z)",onInput:()=>{i.value&&i.setValue({newValue:"default"})},onEnter:u}),a=new HairyBall({canvas:$("#output-canvas"),vectorFieldGeneratingCode:s.checked?r.value:parseNaturalGlsl(r.value),vectorFieldAppletResolution:t.value*siteSettings.resolutionMultiplier,vectorFieldDilation:o.value});function u(){var e=s.checked?r.value:parseNaturalGlsl(r.value);a.vectorFieldAppletResolution=t.value*siteSettings.resolutionMultiplier,a.vectorFieldDilation=o.value,a.runVectorField(e)}new GenerateButton({element:$("#generate-button"),onClick:u}),new DownloadButton({element:$("#download-button"),wilson:a.wilson,filename:"a-hairy-ball.png"}),showPage()}