import{ComplexMaps}from"./class.min.js";import{DownloadHighResButton,GenerateButton}from"/scripts/components/buttons.min.js";import{Dropdown}from"/scripts/components/dropdowns.min.js";import{Textarea}from"/scripts/components/textareas.min.js";import{TextBox}from"/scripts/components/textBoxes.min.js";import{$}from"/scripts/src/main.min.js";import{siteSettings}from"/scripts/src/settings.min.js";export default function(){const e=new ComplexMaps({canvas:$("#output-canvas"),generatingCode:"cexp(cinv(z))"}),t=(new GenerateButton({element:$("#generate-button"),onClick:a}),new DownloadHighResButton({element:$("#download-dropdown"),applet:e,filename:()=>"a-complex-map.png"}),new TextBox({element:$("#resolution-input"),name:"Resolution",value:500,minValue:100,maxValue:2e3,onEnter:a,onInput:function(){e.resolution=t.value*siteSettings.resolutionMultiplier,e.wilson.resizeCanvas({width:e.resolution})}})),n={none:"",trig:"csin(z)",poles:"cinv(cmul(csub(cpow(z, 6.0), 1.0), csub(cpow(z, 3.0), 1.0)))",es:"cexp(cinv(z))",tet:"ctet(z, 100.0)",lattices:"wp(z, draggableArg)"},o=new Dropdown({element:$("#examples-dropdown"),name:"Examples",options:{trig:"Trig",poles:"Poles",es:"Essential Singularity",tet:"Tetration",lattices:"Lattices"},onInput:function(){s.setValue(n[o.value]),a()}}),s=new Textarea({element:$("#glsl-textarea"),name:"Complex Map",value:"cexp(cinv(z))",onInput:()=>{o.value&&o.setValue({newValue:"default"})},onEnter:a});async function a(){await s.loaded,e.loadPromise.then(()=>{e.run({generatingCode:s.value,worldWidth:4,worldCenterX:0,worldCenterY:0})})}a()}