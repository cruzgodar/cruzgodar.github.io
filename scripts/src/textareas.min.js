import{InputElement}from"./inputElement.min.js";import{addTemporaryParam,pageUrl}from"./main.min.js";class Textarea extends InputElement{defaultValue;constructor({element,name,value="",persistState=!0,allowEnter=!1,onInput=()=>{},onEnter=()=>{}}){if(super({element:element,name:name}),this.element.nextElementSibling.textContent=this.name,this.value=value,this.persistState=persistState,this.allowEnter=allowEnter,this.onInput=onInput,this.onEnter=onEnter,this.element.value=this.value,this.element.addEventListener("input",()=>this.inputCallback()),this.element.addEventListener("keydown",e=>{"Enter"!==e.key||this.allowEnter&&!(e.shiftKey||e.metaKey||e.ctrlKey)||(e.preventDefault(),this.disabled)||this.onEnter()}),this.persistState){const value=new URLSearchParams(window.location.search).get(this.element.id);value&&setTimeout(()=>this.setValue(decodeURIComponent(value)),10),addTemporaryParam(this.element.id)}}inputCallback(){this.disabled||this.setValue(this.element.value,!0)}setValue(newValue,callOnInput=!1){var e;this.value=newValue,this.element.value=this.value,this.persistState&&(e=new URLSearchParams(window.location.search),this.value&&e.set(this.element.id,encodeURIComponent(this.value)),e=e.toString(),window.history.replaceState({url:pageUrl},"",pageUrl.replace(/\/home/,"")+"/"+(e?"?"+e:""))),callOnInput&&this.onInput()}}export{Textarea};