import{VectorField}from"/applets/vector-fields/scripts/class.min.js";import{createEmphemeralApplet}from"/scripts/applets/applet.min.js";import{createDesmosGraphs,desmosBlack,desmosGraphs,desmosGraphsLoaded,desmosGray,desmosPurple,getDesmosBounds,getDesmosPoint,getDesmosSlider,getDesmosVector}from"/scripts/src/desmos.min.js";import{$,raw}from"/scripts/src/main.min.js";export default function(){createDesmosGraphs({vectorField:{bounds:{xmin:-8,xmax:8,ymin:-8,ymax:8},expressions:[{latex:raw`f_1(x, y) = x + 3y`,hidden:!0},{latex:raw`f_2(x, y) = 4x + 2y`,hidden:!0},...getDesmosSlider({expression:"n = 12",min:1,max:20,step:1,secret:!1}),...getDesmosSlider({expression:"s = 1",min:.5,max:2,secret:!1}),{latex:raw`A = [(a, b) \for a = [-n, -n+1, ..., n], b = [-n, -n+1, ..., n]]`,hidden:!0,secret:!0},{latex:raw`B = [(f_1(a, b), f_2(a, b)) \for a = [-n, -n+1, ..., n], b = [-n, -n+1, ..., n]]`,hidden:!0,secret:!0},{latex:raw`A + \frac{ts}{25}B`,color:desmosPurple,parametricDomain:{min:0,max:1},secret:!0},{latex:raw`S = [\arctan(f_2(a, b), f_1(a, b)) \for a = [-n, -n+1, ..., n], b = [-n, -n+1, ..., n]]`,hidden:!0,secret:!0},{latex:raw`M = [\left|(f_2(a, b), f_1(a, b))\right| \for a = [-n, -n+1, ..., n], b = [-n, -n+1, ..., n]]`,hidden:!0,secret:!0},{latex:raw`L = \frac{M}{50}`,hidden:!0,secret:!0},{latex:raw`T_1 = -(.35\cos(S + 0.5), .35\sin(S + 0.5))`,hidden:!0,secret:!0},{latex:raw`T_2 = -(.35\cos(S - 0.5), .35\sin(S - 0.5))`,hidden:!0,secret:!0},{latex:raw`A + \frac{s}{25}B + tsL(T_1)`,color:desmosPurple,parametricDomain:{min:0,max:1},secret:!0},{latex:raw`A + \frac{s}{25}B + tsL(T_2)`,color:desmosPurple,parametricDomain:{min:0,max:1},secret:!0}]},vectorField3d:{use3d:!0,bounds:{xmin:-2.5,xmax:2.5,ymin:-2.5,ymax:2.5,zmin:-2.5,zmax:2.5},expressions:[{latex:raw`f_1(x, y, z) = x + 3y`,hidden:!0},{latex:raw`f_2(x, y, z) = y^2 + z`,hidden:!0},{latex:raw`f_3(x, y, z) = x + z^2`,hidden:!0},...getDesmosSlider({expression:"n = 2",min:1,max:5,step:1,secret:!1}),...getDesmosSlider({expression:"s = 1.5",min:.5,max:2,secret:!1}),{latex:raw`A = [(a, b, c) \for a = [-n, -n+1, ..., n], b = [-n, -n+1, ..., n], c = [-n, -n+1, ..., n]]`,hidden:!0,secret:!0},{latex:raw`B = [(f_1(a, b, c), f_2(a, b, c), f_3(a, b, c)) \for a = [-n, -n+1, ..., n], b = [-n, -n+1, ..., n], c = [-n, -n+1, ..., n]]`,hidden:!0,secret:!0},{latex:raw`\vector(A, A + \frac{s}{25}B)`,color:desmosPurple,secret:!0}]},conservativeVectorField1:{use3d:!0,options:{showPlane3D:!1,translucentSurfaces:!0},bounds:{xmin:-2.5,xmax:2.5,ymin:-2.5,ymax:2.5,zmin:-2.5,zmax:2.5},expressions:[{latex:raw`g(x, y) = \frac{x^2}{2} - \frac{y^2}{2}`,color:desmosGray},{latex:raw`g_x(x, y) = \frac{d}{dx}(g(x, y))`,hidden:!0},{latex:raw`g_y(x, y) = \frac{d}{dy}(g(x, y))`,hidden:!0},...getDesmosSlider({expression:"n = 2",min:1,max:5,step:1,secret:!1}),...getDesmosSlider({expression:"s = 1",min:.5,max:2,secret:!1}),{latex:raw`A = [(a, b, g(a, b)) \for a = [-n, -n+1, ..., n], b = [-n, -n+1, ..., n]]`,hidden:!0,secret:!0},{latex:raw`B = [(g_x(a, b), g_y(a, b), g_x(a, b)^2 + g_y(a, b)^2) \for a = [-n, -n+1, ..., n], b = [-n, -n+1, ..., n]]`,hidden:!0,secret:!0},{latex:raw`\vector(A, A + \frac{s}{10}B)`,color:desmosPurple,secret:!0}]},conservativeVectorField2:{alwaysDark:!0,bounds:{xmin:-3,xmax:3,ymin:-3,ymax:3},expressions:[{latex:raw`\frac{x^2}{2} - \frac{y^2}{2} = c`,secret:!0,color:desmosBlack,lineWidth:5},{latex:raw`c = [-20, -19, ..., 20]`,hidden:!0,secret:!0}]},conservativeVectorField3:{alwaysDark:!0,bounds:{xmin:-3,xmax:3,ymin:-3,ymax:3},expressions:[{latex:raw`xy = c`,secret:!0,color:desmosBlack,lineWidth:5},{latex:raw`c = [-20, -19, ..., 20]`,hidden:!0,secret:!0},...getDesmosPoint({point:["1","1"],color:desmosBlack,dragMode:"NONE",size:12}),...getDesmosVector({from:["1","1"],to:["1.35","1.35"],color:desmosBlack,arrowSize:"0.1"}),...getDesmosVector({from:["1","1"],to:["0.65","0.65"],color:desmosBlack,arrowSize:"0.1"})]}}),createEmphemeralApplet($("#vectorField-canvas"),canvas=>{const e=new VectorField({canvas:canvas});return e.loadPromise.then(()=>{e.run({generatingCode:"((x + 3.0 * y) / 8.0, (4.0 * x + 2.0 * y) / 8.0)",worldWidth:5})}),e}),createEmphemeralApplet($("#vectorField2-canvas"),canvas=>{const e=new VectorField({canvas:canvas});return e.loadPromise.then(()=>{e.run({generatingCode:"(x, -y)",dt:.002,worldWidth:3})}),e}),createEmphemeralApplet($("#vectorField3-canvas"),canvas=>{const e=new VectorField({canvas:canvas});return e.loadPromise.then(()=>{e.run({generatingCode:"(-y, x)",dt:.002,worldWidth:3})}),e}),desmosGraphsLoaded.conservativeVectorField2.then(()=>{createEmphemeralApplet($("#conservativeVectorField2-canvas"),canvas=>{const r=new VectorField({canvas:canvas,useFullscreenButton:!1,useResetButton:!1,transparency:!0,onDrawFrame:function(){var e=getDesmosBounds(desmosGraphs.conservativeVectorField2);r.wilson.resizeWorld({width:e.xmax-e.xmin,height:e.ymax-e.ymin,centerX:(e.xmin+e.xmax)/2,centerY:(e.ymin+e.ymax)/2})},minWorldWidth:.01,maxWorldWidth:100,minWorldHeight:.01,maxWorldHeight:100});return r.allowFullscreenWithKeyboard=!1,r.allowResetWithKeyboard=!1,r.loadPromise.then(()=>{r.run({resolution:500,maxParticles:4e3,generatingCode:"(x * 0.35, -y * 0.35)",dt:.005,worldWidth:6,brightness:.9})}),r})}),desmosGraphsLoaded.conservativeVectorField3.then(()=>{createEmphemeralApplet($("#conservativeVectorField3-canvas"),canvas=>{const r=new VectorField({canvas:canvas,useFullscreenButton:!1,useResetButton:!1,transparency:!0,onDrawFrame:function(){var e=getDesmosBounds(desmosGraphs.conservativeVectorField3);r.wilson.resizeWorld({width:e.xmax-e.xmin,height:e.ymax-e.ymin,centerX:(e.xmin+e.xmax)/2,centerY:(e.ymin+e.ymax)/2})},minWorldWidth:.01,maxWorldWidth:100,minWorldHeight:.01,maxWorldHeight:100});return r.allowFullscreenWithKeyboard=!1,r.allowResetWithKeyboard=!1,r.loadPromise.then(()=>{r.run({resolution:500,maxParticles:4e3,generatingCode:"(-y * 0.35, x * 0.35)",dt:.005,worldWidth:6,brightness:.9})}),r})})}